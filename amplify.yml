version: 1
backend:
  phases:
    build:
      commands:
        - amplifyPush --simple
  frontend:
    phases:
      preBuild:
        commands:
          - npm ci
      build:
        commands:
          - npm run build
    artifacts:
      baseDirectory: build
      files:
        - '**/*'
  api:
    plugins:
      - aws-amplify/api
    custom:
      api:
        - graphqlapi:
            endpoint: YOUR_API_ENDPOINT
            database:
              provider: mongodb
              connectionString: "mongodb+srv://kuralanban:Dumbbells%235@twisksdb.scff0oc.mongodb.net"
              region: AWS N. Virginia (us-east-1)
              databaseName: TwisksDB
              auth:
                username: kuralanban
                password: Dumbbells%235
